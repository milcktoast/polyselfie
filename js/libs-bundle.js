require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({A4t7sD:[function(a,b,c){!function(){function a(a){return"function"==typeof a?a:function(){return a}}function c(a){return a[0]}function d(a){return a[1]}function e(a){return a.x}function f(a){return a.y}function g(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function h(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),i=.5*(d+f),j=b.nodes;j[0]&&h(a,j[0],c,d,g,i),j[1]&&h(a,j[1],g,d,e,i),j[2]&&h(a,j[2],c,i,g,f),j[3]&&h(a,j[3],g,i,e,f)}}var i=Math.abs,j=function(b,j,k,l,m){function n(b){function c(a,b,c,e,f,g,h,j){if(!isNaN(c)&&!isNaN(e))if(a.leaf){var k=a.x,l=a.y;if(null!=k)if(i(k-c)+i(l-e)<.01)d(a,b,c,e,f,g,h,j);else{var m=a.point;a.x=a.y=a.point=null,d(a,m,k,l,f,g,h,j),d(a,b,c,e,f,g,h,j)}else a.x=c,a.y=e,a.point=b}else d(a,b,c,e,f,g,h,j)}function d(a,b,d,e,f,h,i,j){var k=.5*(f+i),l=.5*(h+j),m=d>=k,n=e>=l,o=(n<<1)+m;a.leaf=!1,a=a.nodes[o]||(a.nodes[o]=g()),m?f=k:i=k,n?h=l:j=l,c(a,b,d,e,f,h,i,j)}var e,f,n,r,s,t,u,v,w,x=a(p),y=a(q);if(null!=j)t=j,u=k,v=l,w=m;else if(v=w=-(t=u=1/0),f=[],n=[],s=b.length,o)for(r=0;s>r;++r)e=b[r],e.x<t&&(t=e.x),e.y<u&&(u=e.y),e.x>v&&(v=e.x),e.y>w&&(w=e.y),f.push(e.x),n.push(e.y);else for(r=0;s>r;++r){var z=+x(e=b[r],r),A=+y(e,r);t>z&&(t=z),u>A&&(u=A),z>v&&(v=z),A>w&&(w=A),f.push(z),n.push(A)}var B=v-t,C=w-u;B>C?w=u+B:v=t+C;var D=g();if(D.add=function(a){c(D,a,+x(a,++r),+y(a,r),t,u,v,w)},D.visit=function(a){h(a,D,t,u,v,w)},r=-1,null==j){for(;++r<s;)c(D,b[r],f[r],n[r],t,u,v,w);--r}else b.forEach(D.add);return f=n=b=e=null,D}var o,p=c,q=d;return(o=arguments.length)?(p=e,q=f,3===o&&(m=k,l=j,k=j=0),n(b)):(n.x=function(a){return arguments.length?(p=a,n):p},n.y=function(a){return arguments.length?(q=a,n):q},n.extent=function(a){return arguments.length?(null==a?j=k=l=m=null:(j=+a[0][0],k=+a[0][1],l=+a[1][0],m=+a[1][1]),n):null==j?null:[[j,k],[l,m]]},n.size=function(a){return arguments.length?(null==a?j=k=l=m=null:(j=k=0,l=+a[0],m=+a[1]),n):null==j?null:[l-j,m-k]},n)};b.exports=j}()},{}],d3Quadtree:[function(a,b,c){b.exports=a("A4t7sD")},{}],3:[function(a,b,c){var d=function(){"use strict";"use restrict";function a(a,b,c){this.flags=a,this.callback=b,this.context=c}var b={},c={},f=-1,g=[];return a.prototype.dispatch=function(a,b){this.flags===a&&(this.context?this.callback.call(this.context,b):this.callback(b))},b.LOGS=1,b.WARNINGS=2,b.ERRORS=4,b.logFlags=b.ERRORS,b.currentContext={},b.registerContext=function(a){c[a.id]=a,b.enableContext(a)},b.getContextById=function(a){return c[a]?c[a]:(d.error("Couldn't find context id "+a+", returning current with id "+b.currentContext.id),b.currentContext)},b.enableContext=function(a){"string"==typeof a?b.currentContext=getContextById(a):b.currentContext=a,e=b.GL=b.currentContext.GL},b.uniqueId=function(){return++f},b.log=function(a){b.logFlags&b.LOGS&&console.log(a),b.dispatch(b.LOGS,a)},b.warn=function(a){b.logFlags&b.WARNINGS&&console.warn(a),b.dispatch(b.WARNINGS,a)},b.error=function(a){b.logFlags&b.ERRORS&&console.error(a),b.dispatch(b.ERRORS,a)},b.addEventListener=function(b,c,d){return g.push(new a(b,c,d)),g[g.length-1]},b.removeEventListener=function(a){var c=g.indexOf(a);return-1!==c?void g.splice(c,1):void b.warn("GLOW.removeEventListener: Couldn't find listener object")},b.dispatch=function(a,b){for(var c=g.length;c--;)g[c].dispatch(a,b)},b}(),e={};d.Context=function(){"use strict";"use restrict";function a(a){if(void 0===a&&(a={}),this.id=void 0!==a.id?a.id:d.uniqueId(),this.alpha=void 0!==a.alpha?a.alpha:!0,this.depth=void 0!==a.depth?a.depth:!0,this.antialias=void 0!==a.antialias?a.antialias:!0,this.stencil=void 0!==a.stencil?a.stencil:!1,this.premultipliedAlpha=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,this.preserveDrawingBuffer=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,this.width=void 0!==a.width?a.width:window.innerWidth,this.height=void 0!==a.height?a.height:window.innerHeight,this.cache=new d.Cache,this.debug=void 0!==a.debug?a.debug:!1,a.context)this.GL=a.context,d.registerContext(this);else{try{this.domElement=document.createElement("canvas"),this.debug&&window.WebGLDebugUtils&&(this.domElement=WebGLDebugUtils.makeLostContextSimulatingCanvas(this.domElement)),this.GL=this.domElement.getContext("experimental-webgl",{alpha:this.alpha,depth:this.depth,antialias:this.antialias,stencil:this.stencil,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer})}catch(b){d.error("GLOW.Context.construct: "+b)}null!==this.GL?(d.registerContext(this),this.domElement.width=this.width,this.domElement.height=this.height,a.viewport?this.viewport={x:void 0!==a.viewport.x?a.viewport.x:0,y:void 0!==a.viewport.y?a.viewport.y:0,width:void 0!==a.viewport.width?a.viewport.width:this.width,height:void 0!==a.viewport.height?a.viewport.height:this.height}:this.viewport={x:0,y:0,width:this.width,height:this.height},a.clear?(this.clearSettings={r:void 0!==a.clear.red?a.clear.red:0,g:void 0!==a.clear.green?a.clear.green:0,b:void 0!==a.clear.blue?a.clear.blue:0,a:void 0!==a.clear.alpha?a.clear.alpha:1,depth:void 0!==a.clear.depth?a.clear.depth:1,bits:void 0!==a.clear.bits?a.clear.bits:-1},-1===this.clearSettings.bits&&(this.clearSettings.bits=e.COLOR_BUFFER_BIT,this.clearSettings.bits|=this.depth?e.DEPTH_BUFFER_BIT:0,this.clearSettings.bits|=this.stencil?e.STENCIL_BUFFER_BIT:0)):(this.clearSettings={r:0,g:0,b:0,a:1,depth:1,bits:0},this.clearSettings.bits=e.COLOR_BUFFER_BIT,this.clearSettings.bits|=this.depth?e.DEPTH_BUFFER_BIT:0,this.clearSettings.bits|=this.stencil?e.STENCIL_BUFFER_BIT:0),this.enableCulling(!0,{frontFace:e.CCW,cullFace:e.BACK}),this.enableDepthTest(!0,{func:e.LEQUAL,write:!0,zNear:0,zFar:1}),this.enableBlend(!1),this.setViewport(),this.clear()):d.error("GLOW.Context.construct: unable to initialize WebGL")}}return a.prototype.setupClear=function(a){return void 0!==a&&(this.clearSettings.r=void 0!==a.red?Math.min(1,Math.max(0,a.red)):this.clearSettings.r,this.clearSettings.g=void 0!==a.green?Math.min(1,Math.max(0,a.green)):this.clearSettings.g,this.clearSettings.b=void 0!==a.blue?Math.min(1,Math.max(0,a.blue)):this.clearSettings.b,this.clearSettings.a=void 0!==a.alpha?Math.min(1,Math.max(0,a.alpha)):this.clearSettings.a,this.clearSettings.depth=void 0!==a.depth?Math.min(1,Math.max(0,a.depth)):this.clearSettings.depth,this.clearSettings.bits=void 0!==a.bits?a.bits:this.clearSettings.bits),e.clearColor(this.clearSettings.r,this.clearSettings.g,this.clearSettings.b,this.clearSettings.a),e.clearDepth(this.clearSettings.depth),this},a.prototype.clear=function(a){return this.setupClear(a),e.clear(this.clearSettings.bits),this},a.prototype.enableBlend=function(a,b){return a?(e.enable(e.BLEND),b&&this.setupBlend(b)):e.disable(e.BLEND),this},a.prototype.setupBlend=function(a){return a.equationRGB?(a.equationAlpha&&e.blendEquationSeparate(a.equationRGB,a.equationAlpha),a.srcRGB&&e.blendFuncSeparate(a.srcRGB,a.dstRGB,a.srcAlpha,a.dstAlpha)):(a.equation&&e.blendEquation(a.equation),a.src&&e.blendFunc(a.src,a.dst)),this},a.prototype.enableDepthTest=function(a,b){return a?(e.enable(e.DEPTH_TEST),b&&this.setupDepthTest(b)):e.disable(e.DEPTH_TEST),this},a.prototype.setupDepthTest=function(a){return void 0!==a.func&&e.depthFunc(a.func),void 0!==a.write&&e.depthMask(a.write),void 0!==a.zNear&&void 0!==a.zFar&&a.zNear<=a.zFar&&e.depthRange(Math.max(0,Math.min(1,a.zNear)),Math.max(0,Math.min(1,a.zFar))),this},a.prototype.enablePolygonOffset=function(a,b){return a?(e.enable(e.POLYGON_OFFSET_FILL),b&&this.setupPolygonOffset(b)):e.disable(e.POLYGON_OFFSET_FILL),this},a.prototype.setupPolygonOffset=function(a){a.factor&&a.units&&e.polygonOffset(a.factor,a.units)},a.prototype.enableStencilTest=function(a,b){return a?(e.enable(e.STENCIL_TEST),b&&this.setupStencilTest(b)):e.disable(e.STENCIL_TEST),this},a.prototype.setupStencilTest=function(a){return a.func&&a.funcFace?e.stencilFuncSeparate(a.funcFace,a.func,a.funcRef,a.funcMask):a.func&&e.stencilFunc(a.func,a.funcRef,a.funcMask),a.mask&&a.maskFace?e.stencilMaskSeparate(a.maskFace,a.mask):a.mask&&e.stencilMask(a.mask),a.opFail&&a.opFace?e.stencilOpSeparate(a.opFace,a.opFail,a.opZfail,a.opZpass):a.opFail&&e.stencilOp(a.opFail,a.opZfail,a.opZpass),this},a.prototype.enableCulling=function(a,b){return a?(e.enable(e.CULL_FACE),b&&this.setupCulling(b)):e.disable(e.CULL_FACE),this},a.prototype.setupCulling=function(a){try{a.frontFace&&e.frontFace(a.frontFace),a.cullFace&&e.cullFace(a.cullFace)}catch(b){d.error("GLOW.Context.setupCulling: "+b)}return this},a.prototype.enableScissor=function(a,b){return a?(e.enable(e.SCISSOR_TEST),b&&this.setupScissor(b)):e.disable(e.SCISSOR_TEST),this},a.prototype.setupScissor=function(a){try{e.scissor(a.x,a.y,a.width,a.height)}catch(b){d.error("GLOW.Context.setupScissorTest: "+b)}return this},a.prototype.setViewport=function(){this.setupViewport()},a.prototype.setupViewport=function(a){return a&&(this.viewport.x=void 0!==a.x?a.x:this.viewport.x,this.viewport.y=void 0!==a.y?a.y:this.viewport.y,this.viewport.width=void 0!==a.width?a.width:this.viewport.width,this.viewport.height=void 0!==a.height?a.height:this.viewport.height),e.viewport(this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height),this},a.prototype.availableExtensions=function(){return e.getSupportedExtensions()},a.prototype.enableExtension=function(a){for(var b=e.getSupportedExtensions(),c=0,d=b.length;d>c&&a.toLowerCase()!==b[c].toLowerCase();c++);return c!==d?e.getExtension(b[c]):void 0},a.prototype.getParameter=function(a){return e.getParameter(a)},a.prototype.maxVertexTextureImageUnits=function(){return this.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)},a.prototype.resize=function(a,b){var c=a/this.width,d=b/this.height;this.viewport.width=this.viewport.width*c,this.viewport.height=this.viewport.height*d,this.domElement.width=this.width=a,this.domElement.height=this.height=b},a}(),d.Compiler=function(){"use strict";"use restrict";var a={};return a.compile=function(b){var c=d.currentContext.cache.codeCompiled(b.vertexShader,b.fragmentShader);void 0===c&&(c=a.linkProgram(a.compileVertexShader(b.vertexShader),a.compileFragmentShader(b.fragmentShader)),d.currentContext.cache.addCompiledProgram(c));var f=a.createUniforms(a.extractUniforms(c),b.data),g=a.createAttributes(a.extractAttributes(c),b.data,b.usage,b.interleave),h=a.interleaveAttributes(g,b.interleave);if(b.elements)return void d.error("GLOW.Compiler.compile: .elements is no longer supported, please use .indices combined with .primitives");var i=b.indices,j=void 0!==b.primitives?b.primitives:e.TRIANGLES,k=void 0!==b.usage?b.usage:{},l=k.primitives;if(b.triangles?(i=b.triangles,l=k.triangles):b.triangleStrip?(i=b.triangleStrip,j=e.TRIANGLE_STRIP,l=k.triangleStrip):b.triangleFan?(i=b.triangleFan,j=e.TRIANGLE_FAN,l=k.triangleFan):b.points?(i=b.points,j=e.POINTS,l=k.points):b.lines?(i=b.lines,j=e.LINES,l=k.lines):b.lineLoop?(i=b.lineLoop,j=e.LINE_LOOP,l=k.lineLoop):b.lineStrip&&(i=b.lineStrip,j=e.LINE_STRIP,l=k.lineStrip),void 0===i){for(var m in g)if(g[m].data){i=g[m].data.length/g[m].size;break}if(void 0===i)for(var n in h){for(var m in h[n].attributes){i=h[n].attributes[m].data.length/h[n].attributes[m].size;break}break}void 0===i&&(i=0)}var o=a.createElements(i,j,l);return new d.CompiledData(c,f,g,h,o,b)},a.compileVertexShader=function(a){var b;return b=e.createShader(e.VERTEX_SHADER),b.id=d.uniqueId(),e.shaderSource(b,a),e.compileShader(b),e.getShaderParameter(b,e.COMPILE_STATUS)||e.isContextLost()||d.error("GLOW.Compiler.compileVertexShader: "+e.getShaderInfoLog(b)),b},a.compileFragmentShader=function(a){var b;return b=e.createShader(e.FRAGMENT_SHADER),b.id=d.uniqueId(),e.shaderSource(b,a),e.compileShader(b),e.getShaderParameter(b,e.COMPILE_STATUS)||e.isContextLost()||d.error("GLOW.Compiler.compileFragmentShader: "+e.getShaderInfoLog(b)),b},a.linkProgram=function(a,b){var c=e.createProgram();return c||d.error("GLOW.Compiler.linkProgram: Could not create program"),c.id=d.uniqueId(),e.attachShader(c,a),e.attachShader(c,b),e.linkProgram(c),e.getProgramParameter(c,e.LINK_STATUS)||e.isContextLost()||d.error("GLOW.Compiler.linkProgram: Could not initialise program"),c},a.extractUniforms=function(a){for(var b,c,d={},f=0,g=e.getProgramParameter(a,e.ACTIVE_UNIFORMS);g>f&&(c=e.getActiveUniform(a,f),null!==c&&-1!==c&&void 0!==c);f++)b={name:c.name.split("[")[0],size:c.size,type:c.type,location:e.getUniformLocation(a,c.name.split("[")[0]),locationNumber:f},d[b.name]=b;return d},a.extractAttributes=function(a){for(var b,c,d={},f=0,g=e.getProgramParameter(a,e.ACTIVE_ATTRIBUTES);g>f&&(c=e.getActiveAttrib(a,f),null!==c&&-1!==c&&void 0!==c);f++)b={name:c.name,size:c.size,type:c.type,location:e.getAttribLocation(a,c.name),locationNumber:f},d[b.name]=b;return a.highestAttributeNumber=f-1,d},a.createUniforms=function(a,b){var c,f,g,h={},i=0;for(c in a)f=a[c],g=f.name,b[g]instanceof d.Uniform?h[g]=b[g]:(void 0===b[g]&&d.warn("GLOW.Compiler.createUniforms: missing data for uniform "+g+". Creating anyway, but make sure to set data before drawing."),h[g]=new d.Uniform(f,b[g]),(h[g].type===e.SAMPLER_2D||h[g].type===e.SAMPLER_CUBE)&&(h[g].textureUnit=i++,void 0!==h[g].data&&h[g].data.init()));return h},a.createAttributes=function(a,b,c,e){var f,g,h,i={},j=!0;e=void 0!==e?e:{},e===!1&&(j=!1),c=void 0!==c?c:{};for(f in a)g=a[f],h=g.name,b[h]instanceof d.Attribute?i[h]=b[h]:(void 0===b[h]&&d.warn("GLOW.Compiler.createAttributes: missing data for attribute "+h+". Creating anyway, but make sure to set data before drawing."),i[h]=new d.Attribute(g,b[h],c[h],void 0!==e[h]?e[h]:j));return i},a.interleaveAttributes=function(a,b){if(b=void 0!==b?b:{},b===!1)return{};var c,e,f,g,h,i=0,j=[];e=0;for(c in a)e++;if(1===e){for(c in a)a[c].interleaved===!0&&(a[c].interleaved=!1,a[c].data&&a[c].bufferData());return void 0}for(c in a)void 0!==b[c]&&b[c]!==!1&&(i=Math.max(i-1,b[c])+1);for(c in a)void 0===b[c]&&(b[c]=i);for(h in b)b[h]!==!1&&(void 0===j[b[h]]&&(j[b[h]]=[]),j[b[h]].push(a[h]));var k,l;for(c=0,e=j.length;e>c;c++)if(void 0!==j[c])for(k=0,f=0,g=j[c].length;g>f;f++)if(k+4*j[c][f].size>255)for(d.warn("GLOW.Compiler.interleaveAttributes: Stride owerflow, moving attributes to new interleave index. Please check your interleave setup!"),l=j.length,j[l]=[];g>f;)j[l].push(j[c][f]),j[c].splice(f,1),g--;else k+=4*j[c][f].size;var m,n={};for(c=0,e=j.length;e>c;c++)if(void 0!==j[c]){for(m="",f=0,g=j[c].length;g>f;f++)m+=f!==g-1?j[c][f].name+"_":j[c][f].name;n[m]=new d.InterleavedAttributes(j[c])}for(h in b)b[h]!==!1&&delete a[h];return n},a.createElements=function(a,b,c){var e;return e=a instanceof d.Elements?a:new d.Elements(a,b,c)},a}(),d.CompiledData=function(){"use strict";"use restrict";function a(a,b,c,e,f){this.id=d.uniqueId(),this.program=a,this.uniforms=b||{},this.attributes=c||{},this.interleavedAttributes=e||{},this.elements=f,this.uniformArray=void 0,this.attributeArray=void 0,this.interleavedAttributeArray=void 0,this.createArrays()}return a.prototype.createArrays=function(){this.uniformArray=[],this.attributeArray=[],this.interleavedAttributeArray=[];var a,b,c;for(a in this.uniforms)this.uniformArray.push(this.uniforms[a]);for(b in this.attributes)this.attributeArray.push(this.attributes[b]);for(c in this.interleavedAttributes)this.interleavedAttributeArray.push(this.interleavedAttributes[c])},a.prototype.clone=function(a){var b=new d.CompiledData;a=a||{};var c;for(c in this.uniforms)a[c]?a[c]instanceof d.Uniform?b.uniforms[c]=a[c]:(b.uniforms[c]=new d.Uniform(this.uniforms[c],a[c]),(b.uniforms[c].type===e.SAMPLER_2D||b.uniforms[c].type===e.SAMPLER_CUBE)&&(b.uniforms[c].textureUnit=this.uniforms[c].textureUnit,b.uniforms[c].data&&b.uniforms[c].data.init())):b.uniforms[c]=this.uniforms[c];var f;for(f in this.attributes)a[f]?a[f]instanceof d.Attribute?b.attributes[f]=a[f]:b.attributes[f]=new d.Attribute(this.attributes[f],a[f]):b.attributes[f]=this.attributes[f];var g;for(g in this.interleavedAttributes)a[g]?b.interleavedAttributes[g]=a[g]:b.interleavedAttributes[g]=this.interleavedAttributes[g];return a.indices?b.elements=new d.Elements(a.indices,a.primitives):a.elements instanceof d.Elements?b.elements=a.elements:b.elements=this.elements,a.program?b.program=a.program:b.program=this.program,b.createArrays(),b},a.prototype.dispose=function(a,b,c){if(a){var d,f,g;for(d=this.uniformArray.length;d--;)this.uniformArray[d].dispose(c);for(f=this.attributeArray.length;f--;)this.attributeArray[f].dispose();for(g=this.interleavedAttributeArray.length;g--;)this.interleavedAttributeArray[g].dispose();this.elements.dispose()}if(b&&e.isProgram(this.program)){var h=e.getAttachedShaders(this.program);if(h){for(var i=h.length;i--;)e.detachShader(this.program,h[i]),e.deleteShader(h[i]);e.deleteProgram(this.program)}}delete this.program,delete this.uniforms,delete this.attributes,delete this.interleavedAttributes,delete this.elements,delete this.uniformArray,delete this.attributeArray,delete this.interleavedAttributeArray},a}(),d.Cache=function(){"use strict";"use restrict";function a(){this.highestAttributeNumber=-1,this.uniformByLocation=[],this.attributeByLocation=[],this.textureByLocation=[],this.compiledCode=[],this.elementId=-1,this.programId=-1,this.active=!0}return a.prototype.codeCompiled=function(a,b){var c,d,e=this.compiledCode.length;for(d=0;e>d&&(c=this.compiledCode[d],a!==c.vertexShader||b!==c.fragmentShader);d++);return d===e?void this.compiledCode.push({vertexShader:a,fragmentShader:b}):this.compiledCode[d].program},a.prototype.addCompiledProgram=function(a){this.compiledCode[this.compiledCode.length-1].program=a},a.prototype.programCached=function(a){if(this.active){if(a.id===this.programId)return!0;this.programId=a.id,this.uniformByLocation.length=0,this.attributeByLocation.length=0,this.textureByLocation.length=0,this.elementId=-1}return!1},a.prototype.setProgramHighestAttributeNumber=function(a){var b=this.highestAttributeNumber;return this.highestAttributeNumber=a.highestAttributeNumber,a.highestAttributeNumber-b},a.prototype.uniformCached=function(a){if(this.active){if(this.uniformByLocation[a.locationNumber]===a.id)return!0;this.uniformByLocation[a.locationNumber]=a.id}return!1},a.prototype.invalidateUniform=function(a){this.uniformByLocation[a.locationNumber]=void 0},a.prototype.attributeCached=function(a){if(this.active){if(this.attributeByLocation[a.locationNumber]===a.id)return!0;this.attributeByLocation[a.locationNumber]=a.id}return!1},a.prototype.interleavedAttributeCached=function(a){if(this.active)for(var b,c=0,d=a.attributes.length;d>c;c++){if(b=a.attributes[c],this.attributeByLocation[b.locationNumber]===b.id)return!0;this.attributeByLocation[b.locationNumber]=b.id}return!1},a.prototype.invalidateAttribute=function(a){this.attributeByLocation[a.locationNumber]=void 0},a.prototype.textureCached=function(a,b){if(this.active){if(this.textureByLocation[a]===b.id)return!0;this.textureByLocation[a]=b.id}return!1},a.prototype.invalidateTexture=function(a){this.textureByLocation[a]=void 0},a.prototype.elementsCached=function(a){if(this.active){if(a.id===this.elementId)return!0;this.elementId=a.id}return!1},a.prototype.invalidateElements=function(){this.elementId=-1},a.prototype.clear=function(){this.highestAttributeNumber=-1,this.uniformByLocation.length=0,this.attributeByLocation.length=0,this.textureByLocation.length=0,this.elementId=-1,this.programId=-1},a}(),d.FBO=function(){"use strict";"use restrict";function a(a){a=void 0!==a?a:{},this.id=d.uniqueId(),this.width=a.width||a.size||window.innerWidth,this.height=a.height||a.size||window.innerHeight,this.wrapS=a.wrapS||a.wrap||e.CLAMP_TO_EDGE,this.wrapT=a.wrapT||a.wrap||e.CLAMP_TO_EDGE,this.magFilter=a.magFilter||a.filter||e.LINEAR,this.minFilter=a.minFilter||a.filter||e.LINEAR,this.internalFormat=a.internalFormat||e.RGBA,this.format=a.format||e.RGBA,this.type=a.type||e.UNSIGNED_BYTE,this.depth=void 0!==a.depth?a.depth:!0,this.stencil=void 0!==a.stencil?a.stencil:!1,this.data=a.data||null,this.isBound=!1,this.textureUnit=-1,this.textureType=a.cube!==!0?e.TEXTURE_2D:e.TEXTURE_CUBE_MAP,a.viewport?this.viewport={x:void 0!==a.viewport.x?a.viewport.x:0,y:void 0!==a.viewport.y?a.viewport.y:0,width:void 0!==a.viewport.width?a.viewport.width:this.width,height:void 0!==a.viewport.height?a.viewport.height:this.height}:this.viewport={x:0,y:0,width:this.width,height:this.height},a.clear?(this.clearSettings={r:void 0!==a.clear.red?a.clear.red:0,g:void 0!==a.clear.green?a.clear.green:0,b:void 0!==a.clear.blue?a.clear.blue:0,a:void 0!==a.clear.alpha?a.clear.alpha:1,depth:void 0!==a.clear.depth?a.clear.depth:1,bits:void 0!==a.clear.bits?a.clear.bits:-1},-1===this.clearSettings.bits&&(this.clearSettings.bits=e.COLOR_BUFFER_BIT,this.clearSettings.bits|=this.depth?e.DEPTH_BUFFER_BIT:0,this.clearSettings.bits|=this.stencil?e.STENCIL_BUFFER_BIT:0)):(this.clearSettings={r:0,g:0,b:0,a:1,depth:1,bits:0},this.clearSettings.bits=e.COLOR_BUFFER_BIT,this.clearSettings.bits|=this.depth?e.DEPTH_BUFFER_BIT:0,this.clearSettings.bits|=this.stencil?e.STENCIL_BUFFER_BIT:0),this.createBuffers()}var b={posX:0,negX:1,posY:2,negY:3,posZ:4,negZ:5};return a.prototype.createBuffers=function(){this.texture=e.createTexture();var a=e.getError();if(a!==e.NO_ERROR&&a!==e.CONTEXT_LOST_WEBGL)return void d.error("GLOW.FBO.createBuffers: Error creating render texture.");if(e.bindTexture(this.textureType,this.texture),e.texParameteri(this.textureType,e.TEXTURE_WRAP_S,this.wrapS),e.texParameteri(this.textureType,e.TEXTURE_WRAP_T,this.wrapT),e.texParameteri(this.textureType,e.TEXTURE_MAG_FILTER,this.magFilter),e.texParameteri(this.textureType,e.TEXTURE_MIN_FILTER,this.minFilter),this.textureType===e.TEXTURE_2D)null===this.data||this.data instanceof Uint8Array||this.data instanceof Float32Array?e.texImage2D(this.textureType,0,this.internalFormat,this.width,this.height,0,this.format,this.type,this.data):e.texImage2D(this.textureType,0,this.internalFormat,this.format,this.type,this.data);else for(var c in b)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+b[c],0,this.internalFormat,this.width,this.height,0,this.format,this.type,this.data[c]);if(this.depth||this.stencil){if(this.renderBuffer=e.createRenderbuffer(),a=e.getError(),a!==e.NO_ERROR&&a!==e.CONTEXT_LOST_WEBGL)return void d.error("GLOW.FBO.createBuffers: Error creating render buffer.");e.bindRenderbuffer(e.RENDERBUFFER,this.renderBuffer),this.depth&&!this.stencil?e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,this.width,this.height):!this.depth&&this.stencil?e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,this.width,this.height):this.depth&&this.stencil&&e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}if(this.textureType===e.TEXTURE_2D){if(this.frameBuffer=e.createFramebuffer(),a=e.getError(),a!==e.NO_ERROR&&a!==e.CONTEXT_LOST_WEBGL)return void d.error("GLOW.FBO.createBuffers: Error creating frame buffer.");e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0),this.depth&&!this.stencil?e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.renderBuffer):!this.depth&&this.stencil?e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,this.renderBuffer):this.depth&&this.stencil&&e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.renderBuffer)}else{this.frameBuffers={};for(var f in b){if(this.frameBuffers[f]=e.createFramebuffer(),a=e.getError(),a!==e.NO_ERROR&&a!==e.CONTEXT_LOST_WEBGL)return void d.error("GLOW.FBO.createBuffers: Error creating frame buffer for side "+f);e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffers[f]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+b[f],this.texture,0),this.depth&&!this.stencil?e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.renderBuffer):!this.depth&&this.stencil?e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,this.renderBuffer):this.depth&&this.stencil&&e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.renderBuffer)}}e.bindTexture(this.textureType,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null)},a.prototype.deleteBuffers=function(){if(this.texture&&e.deleteTexture(this.texture),this.renderBuffer&&e.deleteRenderbuffer(this.renderBuffer),this.textureType===e.TEXTURE_2D)this.frameBuffer&&e.deleteFramebuffer(this.frameBuffer);else for(var a in b)e.deleteFramebuffer(this.frameBuffers[a])},a.prototype.init=function(){},a.prototype.bind=function(a,b){return this.isBound||(this.isBound=!0,(a||void 0===a)&&this.setupViewport(a),this.textureType===e.TEXTURE_2D?e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer):(b=void 0!==b?b:"posX",e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffers[b]))),this},a.prototype.unbind=function(a){return this.isBound&&(this.isBound=!1,e.bindFramebuffer(e.FRAMEBUFFER,null),(void 0===a||a===!0)&&e.viewport(d.currentContext.viewport.x,d.currentContext.viewport.y,d.currentContext.viewport.width,d.currentContext.viewport.height)),this},a.prototype.setViewport=function(){this.setupViewport()},a.prototype.setupViewport=function(a){return a&&(this.viewport.x=void 0!==a.x?a.x:this.viewport.x,this.viewport.y=void 0!==a.y?a.y:this.viewport.y,this.viewport.width=void 0!==a.width?a.width:this.viewport.width,this.viewport.height=void 0!==a.height?a.height:this.viewport.height),e.viewport(this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height),this},a.prototype.setupClear=function(a){return void 0!==a&&(this.clearSettings.r=void 0!==a.red?Math.min(1,Math.max(0,a.red)):this.clearSettings.r,this.clearSettings.g=void 0!==a.green?Math.min(1,Math.max(0,a.green)):this.clearSettings.g,this.clearSettings.b=void 0!==a.blue?Math.min(1,Math.max(0,a.blue)):this.clearSettings.b,this.clearSettings.a=void 0!==a.alpha?Math.min(1,Math.max(0,a.alpha)):this.clearSettings.a,this.clearSettings.depth=void 0!==a.depth?Math.min(1,Math.max(0,a.depth)):this.clearSettings.depth,this.clearSettings.bits=void 0!==a.bits?a.bits:this.clearSettings.bits),e.clearColor(this.clearSettings.r,this.clearSettings.g,this.clearSettings.b,this.clearSettings.a),e.clearDepth(this.clearSettings.depth),this},a.prototype.clear=function(a){return this.isBound&&(this.setupClear(a),e.clear(this.clearSettings.bits)),this},a.prototype.resize=function(a,b){var c=a/this.width,d=b/this.height;return this.viewport.width=this.viewport.width*c,this.viewport.height=this.viewport.height*d,this.width=a,this.height=b,this.deleteBuffers(),this.createBuffers(),this},a.prototype.generateMipMaps=function(){return e.bindTexture(this.textureType,this.texture),e.generateMipmap(this.textureType),e.bindTexture(this.textureType,null),this},a.prototype.dispose=function(){this.deleteBuffers(),delete this.data,delete this.viewport,delete this.texture,delete this.renderBuffer,delete this.frameBuffer,delete this.frameBuffers,delete this.viewport,delete this.clearSettings},a}(),d.Texture=function(){"use strict";"use restrict";function a(a){void 0!==a.url&&(a.data=a.url),this.id=d.uniqueId(),this.data=a.data,this.autoUpdate=a.autoUpdate,this.internalFormat=a.internalFormat||e.RGBA,this.format=a.format||e.RGBA,this.type=a.type||e.UNSIGNED_BYTE,this.wrapS=a.wrapS||a.wrap||e.REPEAT,this.wrapT=a.wrapT||a.wrap||e.REPEAT,this.magFilter=a.magFilter||a.filter||e.LINEAR,this.minFilter=a.minFilter||a.filter||e.LINEAR_MIPMAP_LINEAR,this.width=a.width,this.height=a.height,this.onLoadComplete=a.onLoadComplete,this.onLoadError=a.onLoadError,this.onLoadContext=a.onLoadContext,this.texture=void 0,this.flipY=a.flipY||0}var b={posX:0,negX:1,posY:2,negY:3,posZ:4,negZ:5};return a.prototype.init=function(){if(void 0!==this.texture)return this;if(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,this.flipY),void 0===this.data&&void 0!==this.width&&void 0!==this.height)this.type===e.UNSIGNED_BYTE?this.data=new Uint8Array(this.width*this.height*(this.format===e.RGBA?4:3)):this.data=new Float32Array(this.width*this.height*(this.format===e.RGBA?4:3));else if("string"==typeof this.data){this.textureType=e.TEXTURE_2D;var a=this.data,c=a.toLowerCase();-1!==c.indexOf(".jpg")||-1!==c.indexOf(".png")||-1!==c.indexOf(".gif")||-1!==c.indexOf("jpeg")?(this.data=new Image,this.data.scope=this,this.data.onerror=this.onLoadError,this.data.onload=this.onLoadImage,this.data.src=a):(void 0===this.autoUpdate&&(this.autoUpdate=!0),this.data=document.createElement("video"),this.data.scope=this,this.data.addEventListener("loadeddata",this.onLoadVideo,!1),this.data.src=a)}else if(this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement||this.data instanceof HTMLCanvasElement||this.data instanceof Uint8Array||this.data instanceof Float32Array)this.textureType=e.TEXTURE_2D,this.createTexture();else{this.textureType=e.TEXTURE_CUBE_MAP,this.itemsToLoad=0;for(var f in b)void 0!==this.data[f]?"string"==typeof this.data[f]&&this.itemsToLoad++:d.error("GLOW.Texture.init: data type error. Did you forget cube map "+f+"? If not, the data type is not supported");if(0===this.itemsToLoad)this.createTexture();else for(var f in b)if("string"==typeof this.data[f]){var a=this.data[f],c=a.toLowerCase();-1!==c.indexOf(".jpg")||-1!==c.indexOf(".png")||-1!==c.indexOf(".gif")||-1!==c.indexOf("jpeg")?(this.data[f]=new Image,this.data[f].scope=this,this.data[f].onload=this.onLoadCubeImage,this.data[f].src=a):(void 0!==this.autoUpdate?this.autoUpdate[f]=void 0!==this.autoUpdate[f]?this.autoUpdate[f]:!0:(this.autoUpdate={},this.autoUpdate[f]=!0),this.data[f]=document.createElement("video"),this.data[f].scope=this,this.data[f].addEventListener("loadeddata",this.onLoadCubeVideo,!1),this.data[f].src=a)}}return this},a.prototype.createTexture=function(){if(void 0!==this.texture&&e.deleteTexture(this.texture),this.texture=e.createTexture(),e.bindTexture(this.textureType,this.texture),this.textureType===e.TEXTURE_2D)if(this.data instanceof Uint8Array||this.data instanceof Float32Array){if(void 0===this.width||void 0===this.height)return void d.error("GLOW.Texture.createTexture: Textures of type Uint8Array/Float32Array requires width and height parameters. Quitting.");e.texImage2D(this.textureType,0,this.internalFormat,this.width,this.height,0,this.format,this.type,this.data)}else e.texImage2D(this.textureType,0,this.internalFormat,this.format,this.type,this.data);else for(var a in b)if(this.data[a]instanceof Uint8Array||this.data[a]instanceof Float32Array){if(void 0===this.width||void 0===this.height)return void d.error("GLOW.Texture.createTexture: Textures of type Uint8Array/Float32Array requires width and height parameters. Quitting.");e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+b[a],0,this.internalFormat,this.width,this.height,0,this.format,this.type,this.data[a])}else e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+b[a],0,this.internalFormat,this.format,this.type,this.data[a]);return e.texParameteri(this.textureType,e.TEXTURE_WRAP_S,this.wrapS),e.texParameteri(this.textureType,e.TEXTURE_WRAP_T,this.wrapT),e.texParameteri(this.textureType,e.TEXTURE_MIN_FILTER,this.minFilter),e.texParameteri(this.textureType,e.TEXTURE_MAG_FILTER,this.magFilter),this.minFilter!==e.NEAREST&&this.minFilter!==e.LINEAR&&e.generateMipmap(this.textureType),this},a.prototype.updateTexture=function(a){if(void 0!==this.texture){a=void 0!==a?a:{};var c=a.level||0,d=a.xOffset||0,f=a.yOffset||0,g=void 0!==a.updateMipmap?a.updateMipmap:!0;if(this.data=a.data||this.data,e.bindTexture(this.textureType,this.texture),this.textureType==e.TEXTURE_2D)this.data instanceof Uint8Array?e.texSubImage2D(this.textureType,c,d,f,this.width,this.height,this.format,this.type,this.data):e.texSubImage2D(this.textureType,c,d,f,this.format,this.type,this.data);else for(var h in a)void 0!==b[h]&&(this.data[h]instanceof Uint8Array?e.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+b[h],c,d,f,this.width,this.height,this.format,this.type,this.data[h]):e.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+b[h],c,d,f,this.format,this.type,this.data[h]));
this.minFilter!==e.NEAREST&&this.minFilter!==e.LINEAR&&g===!0&&e.generateMipmap(this.textureType)}},a.prototype.swapTexture=function(a){this.dispose(),this.data=a,this.init()},a.prototype.onLoadImage=function(){this.scope.createTexture(),this.scope.onLoadComplete&&this.scope.onLoadComplete.call(this.scope.onLoadContext,this.scope)},a.prototype.onLoadError=function(){this.scope.onLoadError&&this.scope.onLoadError.call(this.scope.onLoadContext,this.scope)},a.prototype.onLoadCubeImage=function(){this.scope.itemsToLoad--,0===this.scope.itemsToLoad&&this.scope.createTexture()},a.prototype.onLoadVideo=function(){this.removeEventListener("loadeddata",this.scope.onLoadVideo,!1),this.scope.createTexture()},a.prototype.onLoadCubeVideo=function(){this.removeEventListener("loadeddata",this.scope.onLoadVideo,!1),this.scope.itemsToLoad--,0===this.scope.itemsToLoad&&this.scope.createTexture()},a.prototype.play=function(){if(this.textureType===e.TEXTURE_2D)this.data instanceof HTMLVideoElement&&this.data.play();else for(var a in b)this.data[a]instanceof HTMLVideoElement&&this.data[a].play()},a.prototype.dispose=function(){void 0!==this.texture&&(e.deleteTexture(this.texture),this.texture=void 0),this.data=void 0},a}(),d.Shader=function(){"use strict";"use restrict";function a(a){this.id=d.uniqueId(),this.compiledData=a.use?a.use.clone(a.except):d.Compiler.compile(a),this.uniforms=this.compiledData.uniforms,this.elements=this.compiledData.elements,this.program=this.compiledData.program,this.attachData()}return a.prototype.attachData=function(){var a,b,c;for(a in this.uniforms)void 0===this[a]?void 0!==this.uniforms[a].data?this[a]=this.uniforms[a].data:d.warn("GLOW.Shader.attachUniformAndAttributeData: no data for uniform "+a+", not attaching for easy access. Please use Shader.uniforms."+a+".data to set data."):this[a]!==this.uniforms[a].data&&d.warn("GLOW.Shader.attachUniformAndAttributeData: name collision on uniform "+a+", not attaching for easy access. Please use Shader.uniforms."+a+".data to access data.");for(b in this.compiledData.attributes)void 0===this.attributes&&(this.attributes=this.compiledData.attributes),void 0===this[b]?this[b]=this.compiledData.attributes[b]:this[b]!==this.compiledData.attributes[b]&&d.warn("GLOW.Shader.attachUniformAndAttributeData: name collision on attribute "+b+", not attaching for easy access. Please use Shader.attributes."+b+".data to access data.");for(c in this.compiledData.interleavedAttributes)void 0===this.interleavedAttributes&&(this.interleavedAttributes=this.compiledData.interleavedAttributes),void 0===this[c]?this[c]=this.compiledData.interleavedAttributes[c]:this[c]!==this.compiledData.interleavedAttributes[c]&&d.warn("GLOW.Shader.attachUniformAndAttributeData: name collision on interleavedAttribute "+b+", not attaching for easy access. Please use Shader.interleavedAttributes."+b+".data to access data.")},a.prototype.draw=function(){var a,b,c,f,g,h,i,j=this.compiledData,k=d.currentContext.cache,l=k.attributeByLocation,m=k.uniformByLocation,n=j.attributeArray,o=j.interleavedAttributeArray,p=j.uniformArray;if(!k.programCached(j.program)){e.useProgram(j.program);var q=k.setProgramHighestAttributeNumber(j.program);if(q){var r=j.program.highestAttributeNumber,s=r-q+1;if(q>0)for(;r>=s;s++)e.enableVertexAttribArray(s);else for(s--;s>r;s--)e.disableVertexAttribArray(s)}}if(k.active){for(g=n.length;g--;)b=n[g],b.interleaved===!1&&l[b.locationNumber]!==b.id&&(l[b.locationNumber]=b.id,b.bind());for(g=o.length;g--;){for(a=o[g],c=a.attributes,h=c.length,i=!1;h--;){if(b=c[h],l[b.locationNumber]===b.id){i=!0;break}l[b.locationNumber]=b.id}i||a.bind()}for(g=p.length;g--;)f=p[g],m[f.locationNumber]!==f.id&&(m[f.locationNumber]=f.id,f.load())}else{for(g=n.length;g--;)n[g].interleaved===!1&&n[g].bind();for(g=o.length;g--;)o[g].bind();for(g=p.length;g--;)p[g].load()}j.elements.draw()},a.prototype.clone=function(a){return new d.Shader({use:this.compiledData,except:a})},a.prototype.applyUniformData=function(a,b){if(void 0!==this.compiledData.uniforms[a]){this[a]=b,this.compiledData.uniforms[a].data=b;for(var c=this.compiledData.uniformArray.length;c--;)if(this.compiledData.uniformArray[c].name===a){this.compiledData.uniformArray[c].data=b;break}}},a.prototype.dispose=function(a,b,c){var d,e,f;for(d in this.compiledData.uniforms)delete this[d];for(e in this.compiledData.attributes)delete this[e];for(f in this.compiledData.interleavedAttributes)delete this[f];delete this.program,delete this.elements,delete this.uniforms,delete this.attributes,delete this.interleavedAttributes,this.compiledData.dispose(a,b,c),delete this.compiledData},a}(),d.Elements=function(){"use strict";"use restrict";function a(a,b,c,f){this.id=d.uniqueId(),this.type=void 0!==b?b:e.TRIANGLES,this.offset=void 0!==f?f:0,"number"==typeof a||void 0===a?this.length=a:(a instanceof Uint16Array||(a=new Uint16Array(a)),this.length=a.length,this.elements=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.elements),e.bufferData(e.ELEMENT_ARRAY_BUFFER,a,c?c:e.STATIC_DRAW))}return a.prototype.draw=function(){void 0!==this.elements?(d.currentContext.cache.elementsCached(this)||e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.elements),e.drawElements(this.type,this.length,e.UNSIGNED_SHORT,this.offset)):e.drawArrays(this.type,this.offset,this.length)},a.prototype.clone=function(a){return a=a||{},new d.Elements(a.data||this.data,a.type||this.type,a.usage,a.offset||this.offset)},a.prototype.dispose=function(){void 0!==this.elements&&(e.deleteBuffer(this.elements),delete this.elements)},a}(),d.Uniform=function(){"use strict";"use restrict";function a(){f[e.INT]=function(){e.uniform1iv(this.location,this.getNativeValue())},f[e.FLOAT]=function(){e.uniform1fv(this.location,this.getNativeValue())},f[e.INT_VEC2]=function(){e.uniform2iv(this.location,this.getNativeValue())},f[e.INT_VEC3]=function(){e.uniform3iv(this.location,this.getNativeValue())},f[e.INT_VEC4]=function(){e.uniform4iv(this.location,this.getNativeValue())},f[e.BOOL]=function(){e.uniform1iv(this.location,this.getNativeValue())},f[e.BOOL_VEC2]=function(){e.uniform2iv(this.location,this.getNativeValue())},f[e.BOOL_VEC3]=function(){e.uniform3iv(this.location,this.getNativeValue())},f[e.BOOL_VEC4]=function(){e.uniform4iv(this.location,this.getNativeValue())},f[e.FLOAT_VEC2]=function(){e.uniform2fv(this.location,this.getNativeValue())},f[e.FLOAT_VEC3]=function(){e.uniform3fv(this.location,this.getNativeValue())},f[e.FLOAT_VEC4]=function(){e.uniform4fv(this.location,this.getNativeValue())},f[e.FLOAT_MAT2]=function(){e.uniformMatrix2fv(this.location,!1,this.getNativeValue())},f[e.FLOAT_MAT3]=function(){e.uniformMatrix3fv(this.location,!1,this.getNativeValue())},f[e.FLOAT_MAT4]=function(){e.uniformMatrix4fv(this.location,!1,this.getNativeValue())},f[e.SAMPLER_2D]=function(){void 0===this.data.texture||-1===this.textureUnit||d.currentContext.cache.textureCached(this.textureUnit,this.data)||(e.uniform1i(this.location,this.textureUnit),e.activeTexture(e.TEXTURE0+this.textureUnit),e.bindTexture(e.TEXTURE_2D,this.data.texture),this.data.autoUpdate&&this.data.updateTexture(this.data.autoUpdate))},f[e.SAMPLER_CUBE]=function(){void 0===this.data.texture||-1===this.textureUnit||d.currentContext.cache.textureCached(this.textureUnit,this.data)||(e.uniform1i(this.location,this.textureUnit),e.activeTexture(e.TEXTURE0+this.textureUnit),e.bindTexture(e.TEXTURE_CUBE_MAP,this.data.texture),this.data.autoUpdate&&this.data.updateTexture(this.data.autoUpdate))}}function b(b,e){c||(c=!0,a()),this.id=d.uniqueId(),this.data=e,this.name=b.name,this.length=b.length,this.type=b.type,this.location=b.location,this.locationNumber=b.locationNumber,this.textureUnit=void 0!==b.textureUnit?b.textureUnit:-1,this.load=b.loadFunction||f[this.type]}var c=!1,f=[];return b.prototype.getNativeValue=function(){return this.data.value},b.prototype.clone=function(a){return new d.Uniform(this,a||this.data)},b.prototype.dispose=function(a){void 0!==this.data&&this.type===e.SAMPLER_2D&&a&&this.data.dispose(),delete this.data,delete this.load,delete this.location},b}(),d.Attribute=function(){"use strict";"use restrict";function a(){f[e.INT]=1,f[e.INT_VEC2]=2,f[e.INT_VEC3]=3,f[e.INT_VEC4]=4,f[e.BOOL]=1,f[e.BOOL_VEC2]=2,f[e.BOOL_VEC3]=3,f[e.BOOL_VEC4]=4,f[e.FLOAT]=1,f[e.FLOAT_VEC2]=2,f[e.FLOAT_VEC3]=3,f[e.FLOAT_VEC4]=4,f[e.FLOAT_MAT2]=4,f[e.FLOAT_MAT3]=9,f[e.FLOAT_MAT4]=16}function b(b,g,h,i){c||(c=!0,a()),this.id=d.uniqueId(),this.data=g,this.location=b.location,this.locationNumber=b.locationNumber,this.stride=0,this.offset=0,this.usage=void 0!==h?h:e.STATIC_DRAW,this.interleaved=void 0!==i?i:!1,this.size=f[b.type],this.name=b.name,this.type=b.type,this.data&&(this.data.length/this.size>65536&&d.warn("GLOW.Attribute.constructor: Unreachable attribute? Please activate GL.drawArrays or split into multiple shaders. Indexed elements cannot reach attribute data beyond 65535."),this.interleaved===!1&&this.bufferData(this.data,this.usage))}var c=!1,f=[];return b.prototype.setupInterleave=function(a,b){this.interleaved=!0,this.offset=a,this.stride=b},b.prototype.bufferData=function(a,b){void 0!==a&&this.data!==a&&(this.data=a),void 0!==b&&this.usage!==b&&(this.usage=b),void 0===this.buffer&&(this.buffer=e.createBuffer()),-1!==this.data.constructor.toString().indexOf(" Array()")&&(this.data=new Float32Array(this.data)),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.data,this.usage)},b.prototype.bind=function(){this.interleaved===!1&&e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.vertexAttribPointer(this.location,this.size,e.FLOAT,!1,this.stride,this.offset)},b.prototype.clone=function(a){return this.interleaved?void d.error("GLOW.Attribute.clone: Cannot clone interleaved attribute. Please check your interleave setup."):(a=a||{},new d.Attribute(this,a.data||this.data,a.usage||this.usage,a.interleaved||this.interleaved))},b.prototype.dispose=function(){this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer),delete this.data},b}(),d.InterleavedAttributes=function(){"use strict";"use restrict";function a(a){this.id=d.uniqueId(),this.attributes=a;var b,c,f,g,h,i,j=a[0].data.length/a[0].size,k=a.length,l=[],m=[];for(c=0;k>c;c++)l[c]=0;for(b=0;j>b;b++)for(c=0;k>c;c++){for(i=a[c].data,h=l[c],f=0,g=a[c].size;g>f;f++)m.push(i[h++]);l[c]=h}for(this.data=new Float32Array(m),this.usage=a[0].usage,c=0;k>c;c++)if(this.usage!==a[c].usage){d.warn("GLOW.InterleavedAttributes.construct: Attribute "+a[c].name+" has different usage, defaulting to STATIC_DRAW."),this.usage=e.STATIC_DRAW;break}this.bufferData(this.data,this.usage);var n=0;for(c=0;k>c;c++)n+=4*a[c].size;var o=0;for(c=0;k>c;c++)a[c].setupInterleave(o,n),o+=4*a[c].size}return a.prototype.bufferData=function(a,b){void 0!==a&&this.data!==a&&(this.data=a),void 0===this.buffer&&(this.buffer=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.data,b?b:e.STATIC_DRAW)},a.prototype.bind=function(){e.bindBuffer(e.ARRAY_BUFFER,this.buffer);for(var a=this.attributes.length;a--;)this.attributes[a].bind()},a.prototype.dispose=function(){if(this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer),delete this.data,this.attributes){for(var a=this.attributes.length;a--;)this.attributes[a].dispose();delete this.attributes}},a}(),b.exports=d},{}],"VL+4cI":[function(a,b,c){b.exports=a(3)},{}],GlowCore:[function(a,b,c){b.exports=a("VL+4cI")},{}],mB0KKJ:[function(a,b,c){function d(a){void 0!==a&&a.length?this.value=new Float32Array(a):(this.value=new Float32Array(1),this.value[0]=void 0!==a?a:0)}b.exports=d,d.prototype.set=function(a){return this.value[0]=a,this},d.prototype.add=function(a){return this.value[0]+=a,this},d.prototype.sub=function(a){return this.value[0]-=a,this},d.prototype.multiply=function(a){return this.value[0]*=a,this},d.prototype.divide=function(a){return this.value[0]/=a,this},d.prototype.modulo=function(a){return this.value[0]%=a,this}},{}],GlowFloat:[function(a,b,c){b.exports=a("mB0KKJ")},{}],GlowPlaneGeometry:[function(a,b,c){b.exports=a("wUC3gF")},{}],wUC3gF:[function(a,b,c){b.exports={vertices:function(a,b){var c=new Float32Array(12),d=0;return a=void 0!==a?.5*a:1,b?(c[d++]=-a,c[d++]=0,c[d++]=-a,c[d++]=-a,c[d++]=0,c[d++]=+a,c[d++]=+a,c[d++]=0,c[d++]=+a,c[d++]=+a,c[d++]=0,c[d++]=-a):(c[d++]=+a,c[d++]=-a,c[d++]=0,c[d++]=+a,c[d++]=+a,c[d++]=0,c[d++]=-a,c[d++]=+a,c[d++]=0,c[d++]=-a,c[d++]=-a,c[d++]=0),c},indices:function(){var a=new Uint16Array(6),b=0;return a[b++]=0,a[b++]=1,a[b++]=2,a[b++]=0,a[b++]=2,a[b++]=3,a},indicesFlipped:function(){var a=new Uint16Array(6),b=0;return a[b++]=0,a[b++]=2,a[b++]=1,a[b++]=0,a[b++]=3,a[b++]=2,a},uvs:function(a){var b=new Float32Array(8),c=0;return a?(b[c++]=0,b[c++]=0,b[c++]=0,b[c++]=1,b[c++]=1,b[c++]=1,b[c++]=1,b[c++]=0):(b[c++]=1,b[c++]=0,b[c++]=1,b[c++]=1,b[c++]=0,b[c++]=1,b[c++]=0,b[c++]=0),b},primitives:function(){return GL.TRIANGLES}}},{}]},{},["A4t7sD","mB0KKJ","wUC3gF",3]);